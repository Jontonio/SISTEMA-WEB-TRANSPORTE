<div class="container-fluid content-card mt-4"> 
  <mat-card [ngStyle]="{'background': _theme._box}">
    <mat-card-header class="c-icon">
      <div *ngIf="edit" mat-card-avatar>
        <button mat-icon-button routerLink="../../enterprice">
          <mat-icon><span class="material-icons">keyboard_backspace</span></mat-icon>
        </button>
      </div>
      <mat-card-title>Registro de empresas</mat-card-title>
      <mat-card-subtitle><span class="badge-b">Empresas de transportes</span></mat-card-subtitle>
    </mat-card-header>
    <form [formGroup]="formEnterprise">
      <div class="row">
        <div class="col-md-10" >
          <mat-form-field class="full-width" appearance="legacy">
              <mat-label>RUC</mat-label>
              <input type="email" 
                     matInput autocomplete="off" 
                     formControlName="ruc" 
                     maxlength="11"
                     [ngStyle]="{'color': _theme._color}">
              <mat-error *ngIf="ruc.hasError('pattern') && !ruc.hasError('required')">
                Por favor digíte un número de RUC <strong>válido</strong>
              </mat-error>
              <mat-error *ngIf="ruc.hasError('required')">
                El campo RUC es <strong>requerido</strong>
              </mat-error>
              <mat-error *ngIf="ruc.errors?.minlength && !ruc.hasError('pattern')">
                El campo RUC debe ser contener<strong> 11 carácteres</strong>
              </mat-error>
          </mat-form-field>
        </div>
        <div class="col-md-2">
          <button mat-raised-button type="button" class="button-search" (click)="getRUC()" [disabled]="loadRuc">
            <span *ngIf="loadRuc" class="spinner-border spinner-border-sm" role="status"></span> Buscar RUC
          </button>
        </div>
      </div>
      <div class="row">
        <div class="col-md-12">
          <mat-form-field class="full-width" appearance="legacy">
              <mat-label>Razón social</mat-label>
              <input type="email" matInput 
                     autocomplete="off" 
                     formControlName="razonSocial"
                     [ngStyle]="{'color': _theme._color}">
              <mat-error *ngIf="razonSocial.hasError('required')">
                  La razón social es <strong>requerido</strong>
              </mat-error>
          </mat-form-field>
        </div>
      </div>
      <div class="row">
        <div class="col-md-4">
          <mat-form-field class="full-width" appearance="legacy">
              <mat-label>Departamento</mat-label>
              <input type="email" matInput 
                     autocomplete="off" 
                     formControlName="departamento"
                     [ngStyle]="{'color': _theme._color}">
              <mat-error *ngIf="departamento.hasError('required')">
                El depertamento es <strong>requerido</strong>
              </mat-error>
          </mat-form-field>
        </div>
        <div class="col-md-4">
          <mat-form-field class="full-width" appearance="legacy">
              <mat-label>Provincia</mat-label>
              <input type="email" matInput 
                     autocomplete="off" 
                     formControlName="provincia"
                     [ngStyle]="{'color': _theme._color}">
              <mat-error *ngIf="provincia.hasError('required')">
                La provincia es <strong>requerida</strong>
              </mat-error>
          </mat-form-field>
        </div>
        <div class="col-md-4">
          <mat-form-field class="full-width" appearance="legacy">
              <mat-label>Distrito</mat-label>
              <input type="email" matInput 
                     autocomplete="off" 
                     formControlName="distrito"
                     [ngStyle]="{'color': _theme._color}">
              <mat-error *ngIf="distrito.hasError('required')">
                El distrito es <strong>requerido</strong>
              </mat-error>
          </mat-form-field>
        </div>
      </div>
      <div class="row">
        <div class="col-md-12">
          <mat-form-field class="full-width" appearance="legacy">
              <mat-label>Dirección</mat-label>
              <input type="email" matInput 
                     autocomplete="off" 
                     formControlName="direccion"
                     [ngStyle]="{'color': _theme._color}">
              <mat-error *ngIf="direccion.hasError('required')">
                La direccion es <strong>requerida</strong>
              </mat-error>
          </mat-form-field>
        </div>
      </div>
      <div class="row">
        <div class="col-md-4">
          <mat-form-field class="full-width" appearance="legacy">
              <mat-label>Celular *opcional</mat-label>
              <input type="text" matInput 
                     autocomplete="off" 
                     formControlName="telefonos"
                     [ngStyle]="{'color': _theme._color}">
          </mat-form-field>
        </div>
        <div class="col-md-4">
          <mat-form-field class="full-width" appearance="legacy">
              <mat-label>Tipo</mat-label>
              <input type="email" matInput 
                     autocomplete="off" 
                     formControlName="tipo"
                     [ngStyle]="{'color': _theme._color}">
              <mat-error *ngIf="tipo.hasError('required')">
                El tipo de empresa es <strong>requerida</strong>
              </mat-error>
          </mat-form-field>
        </div>
        <div class="col-md-4">
          <mat-form-field class="full-width" appearance="legacy">
            <mat-label>Estado</mat-label>
            <mat-select formControlName="estado" [ngStyle]="{'color': _theme._color}">
              <mat-option value="ACTIVO">ACTIVO</mat-option>
              <mat-option value="DESACTIVADO">DESACTIVADO</mat-option>
            </mat-select>
            <mat-error *ngIf="estado.hasError('required')">
              El estado de empresa es <strong>requerido</strong>
            </mat-error>
          </mat-form-field>
        </div>
        <div class="col-md-12">
          <mat-form-field class="full-width" appearance="legacy">
            <mat-label>Descripción de la empresa *opcional</mat-label>
            <textarea matInput rows="7" 
                      formControlName="descripcion"
                      [ngStyle]="{'color': _theme._color}"></textarea>
          </mat-form-field>
        </div>
      </div>

      <button *ngIf="!edit" color="primary"  mat-raised-button type="button" (click)="register()" [disabled]="loadRegister">
        <span *ngIf="loadRegister" class="spinner-border spinner-border-sm" role="status"></span>
        <span *ngIf="!loadRegister" class="material-icons">save</span> Registrar
      </button>
      <button *ngIf="edit" color="primary" mat-raised-button type="button" (click)="saveChage()" [disabled]="loadChage">
        <span class="material-icons">save</span> Guardar cambios
      </button>
      <button *ngIf="!edit" mat-raised-button type="reset" class="button-search m-1" color="warn">Cancelar</button>
      
    </form>
  </mat-card>
</div>
