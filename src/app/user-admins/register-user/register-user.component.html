<div class="container-fluid mt-4 content-card">
    <div *ngIf="update" class="mt-2"></div>
    <mat-card [ngStyle]="{'background': _theme._box}">
      <mat-card-header class="c-icon">
        <div *ngIf="update" mat-card-avatar>
          <button mat-icon-button routerLink="../../users">
            <mat-icon><span class="material-icons">keyboard_backspace</span></mat-icon>
          </button>
        </div>
        <mat-card-title [ngStyle]="{'color': _theme._color}">Registro usuario</mat-card-title>
        <mat-card-subtitle><span class="badge-b">usuarios admin</span></mat-card-subtitle>
      </mat-card-header>
      <form class="form-sample" [formGroup]="formUser">
        <div class="row">
          <div class="col-md-2 d-flex justify-content-center align-items-center">
            <div class="row">
              <div class="col-md-12">
                <div class="form-group header-form">
                  <img class="img-preview" [src]="_db.imgURL" alt="">
                  <div class="conten-input">
                    <div class="upload-btn-wrapper">
                      <span class="title-upload" *ngIf="!this._db.subiedoImg">
                        <span class="material-icons">photo_camera</span></span>
                      <span *ngIf="this._db.subiedoImg" >{{this._db.porcentajeSFoto}}%</span>
                      <input type="file" class="file-owner" (change)="_db.onImage($event,3)" accept="image/*" [disabled]="this._db.subiedoImg"/>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="col-md-10">
            <div class="row mt-2">
              <div class="col-md-6">
                <div class="row">
                  <div class="col-md-9">
                    <mat-form-field class="full-width" appearance="outline">
                      <mat-label>DNI</mat-label>
                      <input type="text" matInput 
                             autocomplete="off" 
                             formControlName="ID_card" 
                             maxlength="8"
                             [ngStyle]="{'color': _theme._color}">
                      <mat-error *ngIf="dni.hasError('pattern') && !dni.hasError('required')">
                        Por favor digíte un número de DNI <strong>válido</strong>
                      </mat-error>
                      <mat-error *ngIf="dni.hasError('required')">
                        El campo DNI es <strong>requerido</strong>
                      </mat-error>
                      <mat-error *ngIf="dni.errors?.minlength && !dni.hasError('pattern')">
                        El campo DNI debe ser contener<strong> 8 carácteres</strong>
                      </mat-error>
                    </mat-form-field>
                  </div>
                  <div class="col-md-3 mt-2">
                    <button type="button" 
                            class="full-width" 
                            mat-raised-button 
                            (click)="dataPerson()" 
                            class="button-search"
                            [disabled]="loadPerson">
                      <span *ngIf="loadPerson" class="spinner-border spinner-border-sm" role="status"></span> Buscar
                    </button>
                  </div>
                </div>
              </div>
              <div class="col-md-6">
                <mat-form-field class="full-width" appearance="outline">
                    <mat-label>Nombres</mat-label>
                    <input type="email" matInput 
                           autocomplete="off" 
                           formControlName="firts_name"
                           [ngStyle]="{'color': _theme._color}">
                    <mat-error *ngIf="name.hasError('pattern') && !name.hasError('required')">
                      Por favor digíte un nombre <strong>válido</strong>
                    </mat-error>
                    <mat-error *ngIf="name.hasError('required')">
                      El campo nombre es <strong>requerido</strong>
                    </mat-error>
                </mat-form-field>
              </div>
            </div>
            <div class="row">
                <div class="col-md-6">
                  <mat-form-field class="full-width" appearance="outline">
                      <mat-label>Apellido Paterno</mat-label>
                      <input type="text" matInput 
                             autocomplete="off" 
                             formControlName="father_last_name"
                             [ngStyle]="{'color': _theme._color}">
                      <mat-error *ngIf="flastName.hasError('pattern') && !flastName.hasError('required')">
                        Por favor digíte el apellido Paterno <strong>válido</strong>
                      </mat-error>
                      <mat-error *ngIf="flastName.hasError('required')">
                        Apellido Paterno es <strong>requerido</strong>
                      </mat-error>
                  </mat-form-field>
                </div>
                <div class="col-md-6">
                  <mat-form-field class="full-width" appearance="outline">
                      <mat-label>Apellido Materno</mat-label>
                      <input type="text" matInput 
                             autocomplete="off" 
                             formControlName="mother_last_name"
                             [ngStyle]="{'color': _theme._color}">
                      <mat-error *ngIf="mlastName.hasError('pattern') && !mlastName.hasError('required')">
                        Por favor digíte el apellido Materno <strong>válido</strong>
                      </mat-error>
                      <mat-error *ngIf="mlastName.hasError('required')">
                        Apellido Materno es <strong>requerido</strong>
                      </mat-error>
                  </mat-form-field>
                </div>
              </div>
            <div class="row">
              <div class="col-md-6">
                <mat-form-field class="full-width" appearance="outline">
                    <mat-label>Email</mat-label>
                    <input type="email" matInput 
                           autocomplete="off" 
                           formControlName="user"
                           [ngStyle]="{'color': _theme._color}">
                    <mat-error *ngIf="formUser.controls['user'].hasError('email') && !formUser.controls['user'].hasError('required')">
                      Por favor digíte un email <strong>válido</strong>
                    </mat-error>
                    <mat-error *ngIf="formUser.controls['user'].hasError('required')">
                      El campo email es <strong>requerido</strong>
                    </mat-error>
                </mat-form-field>
              </div>
              <div class="col-md-6">
                <mat-form-field class="full-width" appearance="outline">
                  <mat-label>Tipo de usuario</mat-label>
                  <mat-select formControlName="type_profile" [ngStyle]="{'color': _theme._color}">
                    <mat-option value="normal">Usuario Normal</mat-option>
                    <mat-option value="root">Usuario Root</mat-option>
                  </mat-select>
                  <mat-error *ngIf="tProfile.hasError('required') ">
                    El tipo de usuario <strong>requerido</strong>
                </mat-error>
                </mat-form-field>
              </div>
            </div>
            <div class="row">
              <div class="col-md-12">
                <mat-form-field class="full-width" appearance="outline">
                    <mat-label>Celular</mat-label>
                    <input type="text" matInput 
                           autocomplete="off" 
                           formControlName="celphone" 
                           maxlength="9"
                           [ngStyle]="{'color': _theme._color}">
                    <mat-error *ngIf="phone.hasError('pattern') && !phone.hasError('required')">
                      Por favor digíte un número de celular <strong>válido</strong>
                    </mat-error>
                    <mat-error *ngIf="phone.hasError('required')">
                      El campo celular es <strong>requerido</strong>
                    </mat-error>
                    <mat-error *ngIf="phone.errors?.minlength && !phone.hasError('pattern')">
                      El campo celular debe ser contener<strong> 9 carácteres</strong>
                    </mat-error>
                </mat-form-field>
              </div>
            </div>
            <div class="row mb-4">
                <div class="col-md-6">
                    <button *ngIf="!update" 
                             type="button" 
                             mat-raised-button 
                             color="primary" 
                             class="button-search"
                             (click)="registerUser()" 
                             [disabled]="_db.subiedoImg || loadregister">
                      <span *ngIf="loadregister" class="spinner-border spinner-border-sm" role="status"></span> Registrar
                    </button>
                    <button *ngIf="update" 
                             type="button" 
                             mat-raised-button 
                             class="button-search"
                             color="primary" (click)="updateUser()" [disabled]="!update">
                      <i class="fas fa-save"></i> Guardar cambios
                    </button>
                    <button *ngIf="!update" 
                             type="reset" 
                             mat-raised-button
                             class="button-search m-1"
                             color="warn">Cancelar</button>
                </div>
                <div class="col-md-6">
                </div>
            </div>
          </div>
        </div>
      </form>
    </mat-card>
</div>